{% load static %}
{% load notifications_tags %}

<nav id="navbar-main" class="navbar navbar-expand-lg shadow-sm sticky-top">
    <div class="w-100 justify-content-md-center">
        <ul class="nav navbar-nav enable-mobile px-2">
            <li class="nav-item">
                <button type="button" class="btn nav-link p-0"><img
                        src="{% static 'assets/images/icons/theme/post-image.png' %}" class="f-nav-icon"
                        alt="Quick make post"></button>
            </li>
            <li class="nav-item w-100 py-2">
                <form method="GET" class="d-inline form-inline w-100 px-4">
                    <div class="input-group">
                        <input type="text" class="form-control search-input" name="search"
                               placeholder="Search for people, companies, events and more..." aria-label="Search"
                               aria-describedby="search-addon">
                        <div class="input-group-append">
                            <button class="btn search-button" type="submit"><i class='bx bx-search'></i></button>
                        </div>
                    </div>
                </form>
            </li>
            <li class="nav-item">
                <a href="messages.html" class="nav-link nav-icon nav-links message-drop drop-w-tooltip"
                   data-placement="bottom" data-title="Messages">
                    <img src="{% static 'assets/images/icons/navbar/message.png' %}" class="message-dropdown f-nav-icon"
                         alt="navbar icon">
                </a>
            </li>
        </ul>
        <ul class="navbar-nav mr-5 flex-row" id="main_menu">
            <a class="navbar-brand nav-item mr-lg-5" href="/"><img src="{% static 'assets/images/logo-64x64.png' %}"
                                                                   width="40" height="40" class="mr-3" alt="Logo"></a>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <form action="/search" method="GET" class="w-30 mx-2 my-auto d-inline form-inline mr-5">
                <div class="input-group">
                    <input type="text" name="search" class="form-control search-input w-75"
                           placeholder="Search for people, companies, events and more..." aria-label="Search"
                           aria-describedby="search-addon">
                    <div class="input-group-append">
                        <button class="btn search-button" type="submit"><i class='bx bx-search'></i></button>
                    </div>
                </div>
            </form>
            <li class="nav-item s-nav dropdown d-mobile">
                <a href="#" class="nav-link nav-icon nav-links drop-w-tooltip" data-toggle="dropdown"
                   data-placement="bottom" data-title="Create" role="button" aria-haspopup="true" aria-expanded="false">
                    <img src="{% static 'assets/images/icons/navbar/create.png' %}" alt="navbar icon">
                </a>
                <div class="dropdown-menu dropdown-menu-right nav-dropdown-menu">
                    <a href="#" class="dropdown-item" aria-describedby="createGroup">
                        <div class="row">
                            <div class="col-md-2">
                                <i class='bx bx-group post-option-icon'></i>
                            </div>
                            <div class="col-md-10">
                                <span class="fs-9">Group</span>
                                <small id="createGroup" class="form-text text-muted">Find people with shared
                                    interests</small>
                            </div>
                        </div>
                    </a>
                    <a href="#" class="dropdown-item" aria-describedby="createEvent">
                        <div class="row">
                            <div class="col-md-2">
                                <i class='bx bx-calendar post-option-icon'></i>
                            </div>
                            <div class="col-md-10">
                                <span class="fs-9">Event</span>
                                <small id="createEvent" class="form-text text-muted">bring people together with a public
                                    or private event</small>
                            </div>
                        </div>
                    </a>
                </div>
            </li>
            <li class="nav-item s-nav dropdown message-drop-li">
                <a href="#" class="nav-link nav-links message-drop drop-w-tooltip" data-toggle="dropdown"
                   data-placement="bottom" data-title="Messages" role="button" aria-haspopup="true"
                   aria-expanded="false">
                    <img src="{% static 'assets/images/icons/navbar/message.png' %}" class="message-dropdown"
                         alt="navbar icon"> <span class="badge badge-pill badge-primary">1</span>
                </a>
                <ul class="dropdown-menu notify-drop dropdown-menu-right nav-drop">
                    <div class="notify-drop-title">
                        <div class="row">
                            <div class="col-md-6 col-sm-6 col-xs-6 fs-8">Messages | <a href="#">Requests</a></div>
                            <div class="col-md-6 col-sm-6 col-xs-6 text-right">
                                <a href="#" class="notify-right-icon">
                                    Mark All as Read
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- end notify title -->
                    <!-- notify content -->
                    <div class="drop-content">
                        <li>
                            <div class="col-md-2 col-sm-2 col-xs-2">
                                <div class="notify-img">
                                    <img src="{% static 'assets/images/users/user-6.png' %}"
                                         alt="notification user image">
                                </div>
                            </div>
                            <div class="col-md-10 col-sm-10 col-xs-10">
                                <a href="#" class="notification-user">Susan P. Jarvis</a>
                                <a href="#" class="notify-right-icon">
                                    <i class='bx bx-radio-circle-marked'></i>
                                </a>
                                <p class="time">
                                    <i class='bx bx-check'></i> This party is going to have a DJ, food, and drinks.
                                </p>
                            </div>
                        </li>

                        <li>
                            <div class="col-md-2 col-sm-2 col-xs-2">
                                <div class="notify-img">
                                    <img src="{% static 'assets/images/users/user-5.png' %}"
                                         alt="notification user image">
                                </div>
                            </div>
                            <div class="col-md-10 col-sm-10 col-xs-10">
                                <a href="#" class="notification-user">Ruth D. Greene</a>
                                <a href="#" class="notify-right-icon">
                                    <i class='bx bx-radio-circle-marked'></i>
                                </a>
                                <p class="time">
                                    Great, Iâ€™ll see you tomorrow!.
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="col-md-2 col-sm-2 col-xs-2">
                                <div class="notify-img">
                                    <img src="{% static 'assets/images/users/user-7.png' %}"
                                         alt="notification user image">
                                </div>
                            </div>
                            <div class="col-md-10 col-sm-10 col-xs-10">
                                <a href="#" class="notification-user">Kimberly R. Hatfield</a>
                                <a href="#" class="notify-right-icon">
                                    <i class='bx bx-radio-circle-marked'></i>
                                </a>
                                <p class="time">
                                    yeah, I will be there.
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="col-md-2 col-sm-2 col-xs-2">
                                <div class="notify-img">
                                    <img src="{% static 'assets/images/users/user-8.png' %}"
                                         alt="notification user image">
                                </div>
                            </div>
                            <div class="col-md-10 col-sm-10 col-xs-10">
                                <a href="#" class="notification-user">Joe S. Feeney</a>
                                <a href="#" class="notify-right-icon">
                                    <i class='bx bx-radio-circle-marked'></i>
                                </a>
                                <p class="time">
                                    I would really like to bring my friend Jake, if...
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="col-md-2 col-sm-2 col-xs-2">
                                <div class="notify-img">
                                    <img src="{% static 'assets/images/users/user-9.png' %}"
                                         alt="notification user image">
                                </div>
                            </div>
                            <div class="col-md-10 col-sm-10 col-xs-10">
                                <a href="#" class="notification-user">William S. Willmon</a>
                                <a href="#" class="notify-right-icon">
                                    <i class='bx bx-radio-circle-marked'></i>
                                </a>
                                <p class="time">
                                    Sure, what can I help you with?
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="col-md-2 col-sm-2 col-xs-2">
                                <div class="notify-img">
                                    <img src="{% static 'assets/images/users/user-10.png' %}"
                                         alt="notification user image">
                                </div>
                            </div>
                            <div class="col-md-10 col-sm-10 col-xs-10">
                                <a href="#" class="notification-user">Sean S. Smith</a>
                                <a href="#" class="notify-right-icon">
                                    <i class='bx bx-radio-circle-marked'></i>
                                </a>
                                <p class="time">
                                    Which of those two is best?
                                </p>
                            </div>
                        </li>
                    </div>
                    <div class="notify-drop-footer text-center">
                        <a href="#">See More</a>
                    </div>
                </ul>
            </li>
            <li class="nav-item s-nav dropdown notification">
                <a href="#" class="nav-link nav-links rm-drop-mobile drop-w-tooltip" data-toggle="dropdown"
                   data-placement="bottom" data-title="Notifications" role="button" aria-haspopup="true"
                   aria-expanded="false">
                    <img src="{% static 'assets/images/icons/navbar/notification.png' %}" class="notification-bell"
                         alt="navbar icon"> <span
                        class="badge badge-pill badge-primary" id="not-badge-outer">{% notifications_unread %}</span>
                </a>
                <ul class="dropdown-menu notify-drop dropdown-menu-right nav-drop">
                    <div class="notify-drop-title">
                        <div class="row">
                            <div class="col-md-6 col-sm-6 col-xs-6 fs-8">Notifications <span id ="not-badge-inner"
                                    class="badge badge-pill badge-primary ml-2">{% notifications_unread %}</span></div>
                            <div class="col-md-6 col-sm-6 col-xs-6 text-right">
                                <a href = '/mark-as-read' id ="#notific"  class="notify-right-icon">
                                    Mark All as Read
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- end notify title -->
                    <!-- notify content -->
                    <div class="drop-content">
                        {% for notification in request.user.notifications.all %}
                        <li>
                            <div class="col-md-2 col-sm-2 col-xs-2">
                                <div class="notify-img">
                                    <img not-id="{{notification.id}}" src="{{notification.actor.profile_pic.url }}" alt="notification user image">
                                </div>
                            </div>
                            <div class="col-md-10 col-sm-10 col-xs-10">
                                <a href="#" class="notification-user">{{notification.actor.username}}</a> <span
                                    class="notification-type" style="font-size:0.8rem;">{{notification.description}}</span><a href="#" class="notification-for"></a>

                                {% if notification in request.user.notifications.read %}
                                    <a href="#" class="notify-right-icon mt-4">
                                        <i class='bx bx-check'></i>
                                    </a>
                                {% else %}
                                    <a href="#" class="notify-right-icon mt-4">
                                        <i class='bx bx-radio-circle-marked'></i>
                                    </a>
                                {% endif %}

                                <p class="time">
                                    <span class="badge badge-pill badge-primary"><i class='bx bxs-group'></i></span>
                                    {{notification.timestamp}}
                                            {% if 'sent you a friend request' in notification.description %}
                                                <button onclick="location.href ='/profile/{{notification.actor.username}}'" type ='submit' class = "btn btn-primary btn-sm" id = 'accept-friend' style="border-radius:50px;font-size:0.8rem;"><i class='fa fa-eye'></i> view</button>
                                            {% endif %}
                                        </p>

                                    </div>
                        </li>
                        {% endfor %}

                    </div>
                    <div class="notify-drop-footer text-center">
                        <a href="#">See More</a>
                    </div>
                </ul>
            </li>
            <li class="nav-item s-nav dropdown d-mobile">
                <a href="#" class="nav-link nav-links nav-icon drop-w-tooltip" data-toggle="dropdown"
                   data-placement="bottom" data-title="Pages" role="button" aria-haspopup="true" aria-expanded="false">
                    <img src="{% static 'assets/images/icons/navbar/flag.png' %}" alt="navbar icon">
                </a>
                <div class="dropdown-menu dropdown-menu-right nav-drop">
                    <a class="dropdown-item" href="newsfeed-2.html">Newsfeed 2</a>
                    <a class="dropdown-item" href="sign-in.html">Sign in</a>
                    <a class="dropdown-item" href="sign-up.html">Sign up</a>
                </div>
            </li>
            <li class="nav-item s-nav">
                <a href="/profile/{{request.user.username}}" class="nav-link nav-links">
                    <div class="menu-user-image">
                        <img src="{{ request.user.profile_pic.url }}" class="menu-user-img ml-1" alt="Menu Image">
                    </div>
                </a>
            </li>
            <li class="nav-item s-nav nav-icon dropdown">
                <a href="settings.html" data-toggle="dropdown" data-placement="bottom" data-title="Settings"
                   class="nav-link settings-link rm-drop-mobile drop-w-tooltip" id="settings-dropdown"><img
                        src="{% static 'assets/images/icons/navbar/settings.png' %}" class="nav-settings"
                        alt="navbar icon"></a>
                <div class="dropdown-menu dropdown-menu-right settings-dropdown shadow-sm"
                     aria-labelledby="settings-dropdown">
                    <a class="dropdown-item" href="#">
                        <img src="{% static 'assets/images/icons/navbar/help.png' %}" alt="Navbar icon"> Help Center</a>
                    <a class="dropdown-item d-flex align-items-center dark-mode" href="#">
                        <img src="{% static 'assets/images/icons/navbar/moon.png' %}" alt="Navbar icon"> Dark Mode
                        <button type="button" class="btn btn-lg btn-toggle ml-auto" data-toggle="button"
                                aria-pressed="false" autocomplete="off">
                            <div class="handle"></div>
                        </button>
                    </a>
                    <a class="dropdown-item" href="{% url 'basic-settings' %}">
                        <img src="{% static 'assets/images/icons/navbar/gear-1.png' %}" alt="Navbar icon"> Settings</a>
                    <a class="dropdown-item logout-btn" href="/logout/{{request.session.session_slug}}">
                        <img src="{% static 'assets/images/icons/navbar/logout.png' %}" alt="Navbar icon"> Log Out</a>
                </div>
            </li>
        </ul>
    </div>
</nav>
